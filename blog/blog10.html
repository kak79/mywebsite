<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kearney, NE, Web Design, Web Development, Blog, Computer Programming.">
    <title>Kearney, NE, Web Design, Web Development, Blog, Computer Programming.</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href=../css/blog8.css>
</head>
  <body>
    <div id="layout"><a href="#menu" id="menuLink" class="menu-link"><span></span></a>
      <div id="menu">
        <div class="pure-menu"></br></br>
          <ul class="pure-menu-list"></br>
            <li class="pure-menu-item"><a href="../home.html" class="pure-menu-link">Home</a></li></br>
            <li class="pure-menu-item"><a href="../blog.html" class="pure-menu-link">Blog</a></li></br>
            <li class="pure-menu-item"><a href="../portfolio.html" class="pure-menu-link">Portfolio</a></li></br>   
            <li class="pure-menu-item"><a href="../resume.html" class="pure-menu-link">Resume</a></li></br>
            <li class="pure-menu-item"><a href="../about.html" class="pure-menu-link">About</a></li></br>
            <li class="pure-menu-item"><a href="../contact.html" class="pure-menu-link">Contact</a></li>
          </ul>
        </div>
      </div>
      <div id="main">
        <div class="header">
          <h1>Kimberly A Kohel-Hayes</h1>
          <h2>Web Design, Web Development and Computer Programming</h2>
          <h3>Kearney, Nebraska</h3>
            <div class="pure-menu-horizontal">
            <span>
              <a href="../home.html">Home</a>&nbsp;&middot;                    
              <a href="../blog.html">Blog</a>&nbsp;&middot;
              <a href="../portfolio.html">Portfolio</a>&nbsp;&middot;
              <a href="../resume.html">Resume</a>&nbsp;&middot;
              <a href="../about.html">About</a>&nbsp;&middot;
              <a href="../contact.html">Contact</a>
        </span>
          </div>
        </div>
        <div class="content">
           
          </div>          
        <div class="content pure-u-1 pure-u-md-3-4">
           <!-- A single blog post -->
          <section class="post">
            <header class="content-subhead">
              <div class="post-description">
                <div class="post-images pure-g">
                    <div class="pure-u-1 pure-u-md-1-2">
                        <img alt="" class="pure-img-responsive" src="../images/">
                        <div class="post-image-meta">
                          <h3></h3>
                        </div>
                    </div>
                </div>
            </div>            
            <h1 class="post-title">Going from Local State to a Redux Store in a React App</h1>
            <p class="post-meta"></p>
            </header>
            <div class="post-content">
              <p>
                When choosing between local state and a redux store there is one main factor you want to take into account:  how many components need access to the state.  Just one, use local state.  More than one, you might want to use Redux.  What is Redux?  Well in this post I'm going to define the basic components of Redux and Thunk while explaining how to change from locally defined state to using a Redux store.
              </p>

              <p>
                In the following image I have a fetch set up as local state.
              </p>

              <div class="post-images pure-g">
                <div class="pure-u-1 pure-u-md-1-2">
                <img alt="" class="pure-img-responsive" src="../images/blog10-1.png">
                </div>
              </div>               
                
              <p>
                <strong>Redux</strong> is a JavaScript library that stores all of our data in a global state so that we can access it from across all components in our application. <br> In order to use Redux you need to run either 
              </p>

              <p>
                npx install redux <br>
                npx install react-redux <br>
                npx install thunk
              </p>
              <p>
                or
              </p>
              <p>
                yarn install redux <br>
                yarn install react-redux <br>
                yarn install thunk
              </p>
              <p>
                in your terminal.
              </p>
              <p>
                NOTE: The redux library is not exclusive to React - it can be used with other JS frameworks.
              </p>
              <p>
                Next you need to set up your index.js file like this:
              </p>
              
              <div class="post-images pure-g">
                <div class="pure-u-1 pure-u-md-1-2">
                <img alt="" class="pure-img-responsive" src="../images/blog10-2.png">
                </div>
              </div> 

              <p>
                You are importing a provider, reducer, createStore, thunk and middleware. Then you are making a store with middleware using thunk and line 13 allows use of window's devtools.  Lines 18 and 22 are wrapped around App which makes it so that redux is used for state.  Our <strong>provider</strong> on line 18 is for connecting our <strong>react</strong> app to our <strong>redux</strong> store.  
              </p>
              <p>
                The <strong>redux store</strong> is an object that stores the global state in our app.
              </p>
              <p>
                Next you want to make a <strong>redux</strong> folder in your src folder in which to store all of your <strong>redux</strong> files.  Inside the <strong>redux</strong> folder you want to add an actions folder and a reducers folder and make a reducers file.
              </p>

              <div class="post-images pure-g">
                <div class="pure-u-1 pure-u-md-1-2">
                  <img alt="" class="pure-img-responsive" src="../images/blog10-3.png">
                  <div class="post-images-meta">
                    <h5>File Structure</h5>
                  </div>
                </div>
              </div>               

              <div class="post-images pure-g">
                <div class="pure-u-1 pure-u-md-1-2">
                  <img alt="" class="pure-img-responsive" src="../images/blog10-4.png">
                  <div class="post-images-meta">
                    <h5>reducer.js</h5>
                  </div>
                </div>
              </div> 

              <p>
                A <strong>reducer</strong> is just a function that returns state.  I am using a combined reducer here. It turns out that <strong>redux</strong> lets us combine multiple reducers into one that can be passed into <strong>createStore</strong> by using a helper function named <strong>combineReducers</strong>.  This way I can put more than one reducer in my blogReducer.js file.
              </p>

              <div class="post-images pure-g">
                <div class="pure-u-1 pure-u-md-1-2">
                <img alt="" class="pure-img-responsive" src="../images/blog10-5.png">
                  <div class="post-images-meta">
                    <h5>reducer/blogReducer.js</h5>
                  </div>
                </div>
              </div> 

              <p>
                Examining the file blogReducer.js will gain the information that the state is set to an empty array and there is something called an action.type and an action.payload.  An <strong>action</strong> is a JavaScript object that can be an asyc function.  <strong>Redux</strong> documentation states that 'you can think of an action as an event that describes something that happened in the application.'  An <strong>action</strong> has a type and a payload.  <strong>Action.type</strong> is a string and should be all caps.  <strong>Action.payload</strong> will be other fields with additional informaion in them.<br>
                <code>
                  const add1Action = {
                    type: 'ADD_ONE',
                    payload: + 1
                  }
                </code>
              </p>
              
              <div class="post-images pure-g">
                <div class="pure-u-1 pure-u-md-1-2">
                <img alt="" class="pure-img-responsive" src="../images/blog10-6.png">
                  <div class="post-images-meta">
                    <h5>thunk</h5>
                  </div>
                </div>
              </div> 

              <p>
                Due to the asynchronous nature of <strong>react</strong>, if your <strong>action</strong> is a function, then you need <strong>thunk</strong>.   <strong>Thunk</strong> allows asynchronous functions to return a dispatch action in the form of a function (line 3 and 4 in above image).  Otherwise it returns an action object.
              </p>

              <p>
                If you follow the logic in the image below, first the <strong>componentDidMount()</strong> fires which you can see because of <strong>console.log('A')</strong>.  Then <strong>fetchBlogs()</strong> fires which you can see becase of <strong>console.log('B')</strong>.  Then <strong>console.log('C')</strong> fires before <strong>console.log('D')</strong> does.  This is because <strong>console.log('D')</strong> cannot fire until the 2nd <strong>promise</strong> is returned in the <strong>fetch</strong>.
              </p>

              <div class="post-images pure-g">
                <div class="pure-u-1 pure-u-md-1-2">
                <img alt="" class="pure-img-responsive" src="../images/blog10-7.png">
                  <div class="post-images-meta">
                    <h5>asynchronous nature of action/fetchBlogs.js</h5>
                  </div>
                </div>
              </div> 

              <p>
                In order to <strong>connect</strong> our components to the <strong>store</strong>, we need to import <strong>connect</strong> and use <strong>mapStateToProps</strong> and <strong>mapDispatchToProps</strong>.  <strong>Destructuring</strong> is the process of breaking a structure. In the context of programming, the structures are the data structures, and destructuring these data structures means unpacking individual values from the data structure. On the left side, in BlogContainer.js, the connect statment has mapStateToProps and mapDispatchToProps deconstructed.  They are in a longer format on the right side to show the other way they can be called.
              </p>

              <div class="post-images pure-g">
                <div class="pure-u-1 pure-u-md-1-2">
                <img alt="" class="pure-img-responsive" src="../images/blog10-8.png">
                  <div class="post-images-meta">
                    <h5>mapStateToProps and mapDispatchToProps deconstructed</h5>
                  </div>
                </div>
              </div> 

              
              <p>
                I defined the major terms associated with <strong>redux</strong> and explained the basics about how to set up a <strong>redux</strong> store.  Obviously the time when you want <strong>redux</strong> is in a significantly larger app than this, but this gives the basic idea.  Good luck and happy coding.
              </p>
              
         
          
          </br> 
        </br>
        </br> 
          <div class="pure-g" >
            <div class="pure-u-1-3">
              <button class="pure-button1" onclick="window.location.href='blog9.html';">Previous</button>
              <button class="pure-button2" onclick="window.location.href='blog1.html';">Next</button>
            </div>
          </div>
        </br> 
      </br>
      </br>    
        </section>          
        <div class="footer">
          <a href="https://twitter.com/kim_ka96"><img src="../images/twitter.jpg"alt="Kimberly Kohel-Hayes's Twitter Profile" height="30" width="30"></a>&nbsp;&nbsp;&nbsp;
          <a href="https://dev.to/kak79"><img src="https://d2fltix0v2e0sb.cloudfront.net/dev-badge.svg" alt="Kimberly Kohel-Hayes's DEV Profile" height="30" width="30"></a>&nbsp;&nbsp;&nbsp;
          <a href='https://www.linkedin.com/in/kimberly-kohel-hayes-7b7413191/'><img src="../images/linkedin.jpg"alt="Kimberly Kohel-Hayes's LinkedIn Profile" height="30" width="30"></a>&nbsp;&nbsp;&nbsp;
          <a href='https://stackoverflow.com/users/13615178/kim'><img src="../images/stack.jpg"alt="Kimberly Kohel-Hayes's Stack Overflow Profile" height="30" width="30"></a>&nbsp;&nbsp;&nbsp;
          <a href='https://github.com/kak79?tab=repositories'><img src="../images/git.png"alt="Kimberly Kohel-Hayes's Git Hub Repositories" height="30" width="30"></a>
          <p class="license">License <a href='https://opensource.org/licenses/MIT'>MIT</a> & &copy; Kimberly A Kohel-Hayes</p>
        </div> 
      </div> 
    </div>
    <script src="../js/ui.js"></script>
  </body>
</html>